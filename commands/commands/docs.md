# 智能文档管理器

## 命令说明
智能管理项目文档，通过分析实际变更来更新所有相关文档，确保文档与代码保持同步。

## 使用工具
- `search_codebase` - 分析项目结构和代码变更
- `view_files` - 读取现有文档内容
- `list_dir` - 扫描文档目录结构
- `update_file` - 更新现有文档
- `write_to_file` - 创建新文档
- `search_by_regex` - 查找特定文档模式

## 文档分析策略

### 阶段1：文档发现与分析
**强制步骤：**
1. 扫描所有Markdown文件（README、CHANGELOG、docs/*等）
2. 分析文档结构和覆盖范围
3. 识别过时或缺失的文档
4. 评估文档质量和完整性

### 阶段2：变更影响分析
1. 分析会话中的代码变更
2. 识别受影响的文档类型
3. 确定需要更新的具体内容
4. 规划文档更新策略

### 阶段3：智能文档更新
1. 更新所有受影响的文档
2. 保持文档间的一致性
3. 添加缺失的文档章节
4. 优化文档结构和可读性

## Trae使用示例

```markdown
用户：更新项目文档，我们刚添加了新的API端点

助手：我来分析项目文档并更新所有相关内容。

*使用list_dir扫描文档结构*
*使用search_codebase分析API变更*
*使用view_files读取现有文档*

## 文档分析结果

### 📚 发现的文档
- README.md ✅ 当前
- CHANGELOG.md ⚠️ 需要更新（缺少v2.1.0）
- docs/api.md ❌ 过时（缺少3个新端点）
- docs/setup.md ✅ 当前
- CONTRIBUTING.md ⚠️ 部分过时

### 🔍 检测到的变更
- 新增：POST /api/users/profile
- 新增：GET /api/users/preferences  
- 新增：PUT /api/users/settings
- 修改：GET /api/users（新增分页参数）

### 📝 更新计划
1. 更新API文档（新增端点说明）
2. 更新CHANGELOG（添加v2.1.0条目）
3. 更新README（如果有新的使用方式）
4. 检查其他相关文档

*使用update_file更新各个文档*

✅ 文档更新完成！所有文档现在都与最新代码保持同步。
```

## 文档类型识别

### 核心文档
- **README.md**：项目概述、安装、使用说明
- **CHANGELOG.md**：版本变更记录
- **CONTRIBUTING.md**：贡献指南
- **LICENSE**：许可证信息

### 技术文档
- **API文档**：接口说明、参数、示例
- **架构文档**：系统设计、组件关系
- **部署文档**：环境配置、部署流程
- **开发文档**：开发环境、调试指南

### 用户文档
- **用户手册**：功能使用说明
- **FAQ**：常见问题解答
- **教程**：分步骤指导
- **示例**：代码示例和用例

## 智能更新策略

### 内容同步检查
```markdown
检查项目：
- [ ] 新功能是否在README中提及
- [ ] API变更是否更新了API文档
- [ ] 配置变更是否更新了配置文档
- [ ] 依赖变更是否更新了安装说明
- [ ] 架构变更是否更新了架构图
```

### 版本一致性
- **版本号同步**：确保所有文档中的版本号一致
- **功能状态**：标记功能的稳定性状态
- **兼容性说明**：更新兼容性矩阵
- **迁移指南**：提供版本升级指导

### 文档质量保证
- **链接检查**：验证内部和外部链接有效性
- **格式一致性**：统一Markdown格式和风格
- **代码示例**：确保代码示例可执行
- **截图更新**：更新过时的界面截图

## 文档模板系统

### README.md模板
```markdown
# 项目名称

简短描述项目的作用和价值。

## 特性

- 🚀 特性1：描述
- 📊 特性2：描述
- 🔒 特性3：描述

## 快速开始

### 安装
\`\`\`bash
npm install project-name
\`\`\`

### 基本使用
\`\`\`javascript
// 代码示例
\`\`\`

## API文档

详细的API使用说明...

## 贡献

请阅读 [CONTRIBUTING.md](CONTRIBUTING.md) 了解贡献指南。

## 许可证

[MIT](LICENSE)
```

### API文档模板
```markdown
# API文档

## 概述

API基础信息和认证方式。

## 端点

### GET /api/resource

**描述**：获取资源列表

**参数**：
- `page` (number, optional)：页码，默认1
- `limit` (number, optional)：每页数量，默认10

**响应**：
\`\`\`json
{
  "data": [...],
  "pagination": {...}
}
\`\`\`

**示例**：
\`\`\`bash
curl -X GET "https://api.example.com/api/resource?page=1&limit=10"
\`\`\`
```

### CHANGELOG模板
```markdown
# 变更日志

## [未发布]

### 新增
- 新功能描述

### 变更
- 变更内容描述

### 修复
- 修复问题描述

## [1.0.0] - 2024-01-15

### 新增
- 初始版本发布
```

## 文档自动化功能

### 内容生成
- **API文档生成**：从代码注释生成API文档
- **类型文档**：从TypeScript类型生成文档
- **配置文档**：从配置文件生成说明
- **示例代码**：自动生成使用示例

### 质量检查
- **拼写检查**：检查文档中的拼写错误
- **语法检查**：验证Markdown语法
- **链接验证**：检查链接的有效性
- **图片检查**：验证图片资源存在

### 文档指标
- **覆盖率**：计算文档覆盖的功能比例
- **新鲜度**：检查文档的更新时间
- **完整性**：评估文档的完整程度
- **可读性**：分析文档的可读性得分

## 协作功能

### 多语言支持
- **国际化**：支持多语言文档维护
- **翻译同步**：检查翻译版本的同步状态
- **本地化**：适配不同地区的文档需求

### 团队协作
- **文档责任人**：为不同文档指定维护者
- **审核流程**：建立文档审核机制
- **变更通知**：通知相关人员文档变更
- **版本控制**：跟踪文档的版本历史

## 重要提示

⚠️ **全面性原则**
- 不只更新一个文件，要考虑所有相关文档
- 确保文档间的信息一致性
- 维护文档的整体结构和逻辑

⚠️ **用户视角**
- 从用户角度审视文档的可用性
- 提供清晰的导航和索引
- 包含足够的示例和用例

⚠️ **维护性**
- 建立可持续的文档维护流程
- 使用自动化工具减少手工维护
- 定期审查和更新文档内容

⚠️ **质量标准**
- 保持文档的专业性和准确性
- 使用统一的写作风格和格式
- 确保代码示例的正确性和时效性